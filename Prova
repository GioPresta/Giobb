Perfetto! Ora applichiamo una sola logica uniforme per tutti i file, senza distinzione tra il primo e i successivi.


---

‚úÖ Logica unificata da applicare a ogni file

Per ogni file .txt, fai quanto segue:

1. Trova la riga con LIVELLO.


2. Estrai quella riga e le 5 successive (totale: 6 righe).


3. Salta le 4 righe successive.


4. Poi copia tutte le righe fino alla prima che inizia con *** (inclusi trattini e tutto quello che c‚Äô√® prima degli asterischi).




---

üêç Script Python Finale (senza distinzione tra file)

import os

def process_file(filepath):
    with open(filepath, 'r', encoding='latin-1') as f:
        lines = f.readlines()

    output = []
    i = 0

    # Trova la riga con "LIVELLO"
    while i < len(lines):
        if 'LIVELLO' in lines[i]:
            break
        i += 1

    if i >= len(lines):
        return []  # LIVELLO non trovato

    # Estrai 6 righe da LIVELLO in poi
    output.extend(lines[i:i+6])
    i += 10  # salta le 6 righe + 4 righe successive

    # Estrai righe fino agli asterischi
    while i < len(lines):
        if lines[i].strip().startswith('***'):
            break
        output.append(lines[i])
        i += 1

    return output


def main():
    current_dir = os.path.dirname(os.path.abspath(__file__))
    txt_files = [f for f in os.listdir(current_dir) if f.endswith('.txt')]
    txt_files.sort()

    merged_output = []
    for filename in txt_files:
        filepath = os.path.join(current_dir, filename)
        result = process_file(filepath)
        if result:
            merged_output.extend(result)
            merged_output.append('\n')

    output_path = os.path.join(current_dir, 'output_merged.txt')
    with open(output_path, 'w', encoding='utf-8') as out_f:
        out_f.writelines(merged_output)

    print(f'‚úÖ File creato correttamente: {output_path}')


if __name__ == "__main__":
    main()


---

üìÇ Output output_merged.txt

Ogni file √® elaborato nello stesso modo.

Estrae intestazione e dati rilevanti.

Nessun separatore o info sul nome del file.

Mantiene anche i trattini (------) e si ferma prima degli asterischi.


Fammi sapere se vuoi:

Includere anche la riga di asterischi come delimitatore finale.

**Esportare in altri formati

