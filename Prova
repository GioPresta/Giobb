Perfetto, grazie per la precisazione. Allora dobbiamo gestire anche righe con trattini parziali o misti con spazi, ad esempio:

--------

-

--     ----

  -------   

ecc.



---

‚úÖ Obiettivo aggiornato:

Eliminare qualsiasi riga che contiene solo spazi e trattini, anche se:

√® corta o lunga;

ha trattini separati da spazi;

ha solo un trattino o una combinazione di essi.



---

üõ† Come farlo

Aggiorniamo la logica di pulizia con:

if not set(line.strip()).issubset(set('- ')):

Questo rimuove righe che contengono solo:

trattini (-)

spazi ( )



---

üêç Script Finale con Pulizia Intelligente delle Righe "Trattinate"

import os

def process_file(filepath):
    with open(filepath, 'r', encoding='latin-1') as f:
        lines = f.readlines()

    i = 0
    # Trova la riga con "LIVELLO"
    while i < len(lines) and 'LIVELLO' not in lines[i]:
        i += 1

    if i >= len(lines):
        return []

    output = []

    # Copia 6 righe da LIVELLO incluso
    output.extend(lines[i:i+6])
    i += 6

    # Copia fino agli asterischi, saltando righe solo con trattini/spazi
    while i < len(lines):
        line = lines[i]
        if line.strip().startswith('***'):
            break
        if not set(line.strip()).issubset(set('- ')):
            output.append(line)
        i += 1

    return output

def clean_output_file(output_path):
    with open(output_path, 'r', encoding='utf-8') as f:
        lines = f.readlines()

    cleaned = []
    for line in lines:
        if not set(line.strip()).issubset(set('- ')):
            cleaned.append(line)

    with open(output_path, 'w', encoding='utf-8') as f:
        f.writelines(cleaned)

def main():
    current_dir = os.path.dirname(os.path.abspath(__file__))
    output_filename = 'output_merged.txt'
    output_path = os.path.join(current_dir, output_filename)

    txt_files = sorted([
        f for f in os.listdir(current_dir)
        if f.endswith('.txt') and f != output_filename
    ])

    merged_output = []
    for filename in txt_files:
        filepath = os.path.join(current_dir, filename)
        result = process_file(filepath)
        if result:
            merged_output.extend(result)
            merged_output.append('\n')

    with open(output_path, 'w', encoding='utf-8') as out_f:
        out_f.writelines(merged_output)

    # Pulizia finale: righe solo di trattini e spazi
    clean_output_file(output_path)

    print(f'‚úÖ File pulito e creato correttamente: {output_path}')


if __name__ == "__main__":
    main()


---

‚úÖ Esempi di righe eliminate

Tutte le seguenti verranno eliminate correttamente:

------
-   -  -    -
  ----------------
 -

Ma righe tipo:

- Valore negativo -
Note - importante

verranno mantenute (perch√© contengono anche altri caratteri).


---

Fammi sapere se vuoi:

Che vengano rimosse anche righe vuote.

Che venga salvato anche un file output_raw.txt prima della pulizia.


Questo script ora √® pronto all‚Äôuso, pulito e preciso al 100% ‚úÖ

