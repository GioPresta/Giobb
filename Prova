Il codice è stato testato in locale con Python 3.9.5, utilizzando il dataset completo con controlli di data quality, e in quella configurazione funzionava correttamente. La successiva conversione a Python 3.13.7 ha evidenziato alcune differenze nel comportamento: nelle versioni più recenti di pandas, operazioni come l’assegnamento su righe tramite .iloc[-1, :].loc[...] = ... lavorano su copie temporanee invece che sui dati originali, mentre nelle versioni precedenti questo avveniva in modo implicito. Di conseguenza, la riga Total non veniva aggiornata correttamente e la riga Total without Funds ereditava valori non corretti. Per risolvere il problema, il codice è stato aggiornato eliminando il chained assignment e calcolando esplicitamente le righe Total e Total without Funds considerando sempre il rapporto tra DurationMVSumProd e il Total Market Value, in modo da ottenere la Duration corretta anche per i casi totali e per i totali senza fondi. Inoltre, sono state apportate migliorie per la compatibilità in locale: non è più necessario inserire manualmente il percorso dei file, in quanto vengono individuati automaticamente dal codice. Con queste modifiche, il codice funziona in modo affidabile su qualsiasi versione di pandas, mantiene l’integrità dei dati e conserva l’ordine corretto delle righe.